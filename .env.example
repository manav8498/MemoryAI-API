# =============================================================================
# AI MEMORY API - ENVIRONMENT CONFIGURATION
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
APP_NAME="AI Memory API"
APP_VERSION="1.0.0"
APP_ENV="development"  # development | staging | production
DEBUG=true
SECRET_KEY="your-secret-key-here-change-in-production"
API_V1_PREFIX="/v1"
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:8000"

# -----------------------------------------------------------------------------
# SERVER
# -----------------------------------------------------------------------------
HOST="0.0.0.0"
PORT=8000
WORKERS=4
RELOAD=true

# -----------------------------------------------------------------------------
# DATABASE - POSTGRESQL
# -----------------------------------------------------------------------------
POSTGRES_HOST="localhost"
POSTGRES_PORT=5432
POSTGRES_USER="memory_ai"
POSTGRES_PASSWORD="memory_password"
POSTGRES_DB="memory_ai_db"

# -----------------------------------------------------------------------------
# REDIS CACHE
# -----------------------------------------------------------------------------
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""
REDIS_DB=0

# -----------------------------------------------------------------------------
# VECTOR DATABASE - MILVUS
# -----------------------------------------------------------------------------
MILVUS_HOST="localhost"
MILVUS_PORT=19530
MILVUS_USER="root"
MILVUS_PASSWORD="Milvus"
MILVUS_COLLECTION_PREFIX="memory_ai"

# -----------------------------------------------------------------------------
# KNOWLEDGE GRAPH - NEO4J
# -----------------------------------------------------------------------------
NEO4J_URI="bolt://localhost:7687"
NEO4J_USER="neo4j"
NEO4J_PASSWORD="your-neo4j-password"
NEO4J_DATABASE="neo4j"

# -----------------------------------------------------------------------------
# MESSAGE QUEUE - KAFKA
# -----------------------------------------------------------------------------
KAFKA_BOOTSTRAP_SERVERS="localhost:9092"
KAFKA_TOPIC_TRAJECTORIES="memory_ai.trajectories"
KAFKA_TOPIC_MEMORIES="memory_ai.memories"
KAFKA_CONSUMER_GROUP="memory_ai_processors"

# -----------------------------------------------------------------------------
# OBJECT STORAGE - S3 (or compatible)
# -----------------------------------------------------------------------------
S3_ENDPOINT="https://s3.amazonaws.com"
S3_ACCESS_KEY="your-access-key"
S3_SECRET_KEY="your-secret-key"
S3_BUCKET_TRAJECTORIES="memory-ai-trajectories"
S3_BUCKET_MODELS="memory-ai-models"
S3_REGION="us-east-1"

# -----------------------------------------------------------------------------
# LLM PROVIDERS
# -----------------------------------------------------------------------------
# OpenAI
OPENAI_API_KEY="sk-proj-xxxxxxxxxxxxxxxxxxxx"
OPENAI_MODEL="gpt-4o"
OPENAI_EMBEDDING_MODEL="text-embedding-3-large"

# Google Gemini
GOOGLE_API_KEY="AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXX"
GEMINI_MODEL="gemini-2.0-flash-exp"
GEMINI_THINKING_BUDGET="dynamic"

# Anthropic Claude
ANTHROPIC_API_KEY="sk-ant-api03-xxxxxxxxxxxxxxxxxxxx"
CLAUDE_MODEL="claude-3-5-sonnet-20241022"

# Default LLM Provider
DEFAULT_LLM_PROVIDER="gemini"  # openai | gemini | anthropic

# -----------------------------------------------------------------------------
# EMBEDDING MODELS
# -----------------------------------------------------------------------------
# Local embedding model (BGE-M3)
EMBEDDING_MODEL_NAME="BAAI/bge-m3"
EMBEDDING_DEVICE="cpu"  # cpu | cuda | mps
EMBEDDING_BATCH_SIZE=32
EMBEDDING_DIMENSION=1024

# Fallback to API-based embeddings
USE_API_EMBEDDINGS=false
EMBEDDING_API_PROVIDER="openai"  # openai | cohere

# -----------------------------------------------------------------------------
# REASONING ENGINE
# -----------------------------------------------------------------------------
REASONING_TIMEOUT_SECONDS=30
REASONING_MAX_RETRIES=3
REASONING_CACHE_TTL=3600
ENABLE_THOUGHT_SUMMARIES=true
ENABLE_SYMBOLIC_VALIDATION=true

# -----------------------------------------------------------------------------
# MEMORY CONFIGURATION
# -----------------------------------------------------------------------------
# Chunking
CHUNK_SIZE=512
CHUNK_OVERLAP=50
CHUNKING_STRATEGY="recursive"  # recursive | semantic | fixed

# Retrieval
DEFAULT_SEARCH_LIMIT=10
MAX_SEARCH_LIMIT=100
HYBRID_SEARCH_ALPHA=0.5  # 0=sparse only, 1=dense only, 0.5=balanced
ENABLE_CROSS_ENCODER_RERANKING=true
RERANKER_MODEL="cross-encoder/ms-marco-MiniLM-L-6-v2"

# Memory Decay
ENABLE_MEMORY_DECAY=true
DEFAULT_DECAY_RATE=0.001
IMPORTANT_MEMORY_DECAY_RATE=0.0001

# -----------------------------------------------------------------------------
# REINFORCEMENT LEARNING
# -----------------------------------------------------------------------------
ENABLE_RL_LOGGING=true
RL_TRAINING_SCHEDULE="weekly"  # daily | weekly | manual
MIN_TRAJECTORIES_FOR_TRAINING=1000
RL_BATCH_SIZE=512
RL_LEARNING_RATE=0.0001
RL_PPO_EPSILON=0.2
RL_KL_PENALTY=0.1

# -----------------------------------------------------------------------------
# AUTHENTICATION & AUTHORIZATION
# -----------------------------------------------------------------------------
JWT_SECRET_KEY="your-jwt-secret-key-change-in-production"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
API_KEY_PREFIX="mem_sk"

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_FREE_TIER="100/minute"
RATE_LIMIT_STARTER_TIER="1000/minute"
RATE_LIMIT_PRO_TIER="10000/minute"

# -----------------------------------------------------------------------------
# OBSERVABILITY
# -----------------------------------------------------------------------------
# Logging
LOG_LEVEL="INFO"  # DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_FORMAT="json"  # json | text

# Prometheus
ENABLE_METRICS=true
METRICS_PORT=9090

# Jaeger Tracing
ENABLE_TRACING=true
JAEGER_AGENT_HOST="localhost"
JAEGER_AGENT_PORT=6831

# Sentry Error Tracking
SENTRY_DSN=""
SENTRY_TRACES_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_WEBHOOKS=true
ENABLE_STREAMING_RESPONSES=true
ENABLE_BATCH_OPERATIONS=true
ENABLE_MULTI_TENANCY=true

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGINS="*"
ENABLE_HTTPS_REDIRECT=false
ALLOWED_HOSTS="*"
ENABLE_CSRF_PROTECTION=false

# -----------------------------------------------------------------------------
# PERFORMANCE
# -----------------------------------------------------------------------------
ENABLE_RESPONSE_CACHING=true
CACHE_TTL_SECONDS=300
CONNECTION_POOL_SIZE=20
MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# DEVELOPMENT
# -----------------------------------------------------------------------------
ENABLE_API_DOCS=true
ENABLE_PROFILING=false
MOCK_LLM_RESPONSES=false
